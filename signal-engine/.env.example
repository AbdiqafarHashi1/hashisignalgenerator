# Strategy profiles (fallback defaults only; every key below can override via env)
# SCALPER_FAST: fastest cadence
# SCALPER_STABLE: balanced defaults
# RANGE_MEAN_REVERT: slower range-focused defaults

# Core mode
MODE=signal_only
ENGINE_MODE=signal_only
STRATEGY_PROFILE=SCALPER_FAST
SYMBOLS=ETHUSDT,BTCUSDT,SOLUSDT,BNBUSDT,AVAXUSDT
HEARTBEAT_MINUTES=30
DATA_DIR=data
STRATEGY=scalper
CURRENT_MODE=SCALP
DEBUG_LOOSEN=false
DEBUG_DISABLE_HARD_RISK_GATES=false

# Risk configuration (prop_cfd defaults shown)

# Bybit Testnet (USDT Perpetual V5)
BYBIT_TESTNET=false
BYBIT_API_KEY=
BYBIT_API_SECRET=
BYBIT_REST_BASE=https://api.bybit.com
BYBIT_WS_PUBLIC_LINEAR=wss://stream.bybit.com/v5/public/linear
MARKET_DATA_PROVIDER=bybit
MARKET_DATA_FALLBACKS=binance,okx,replay
MARKET_DATA_FAILOVER_THRESHOLD=3
MARKET_DATA_BACKOFF_BASE_MS=500
MARKET_DATA_BACKOFF_MAX_MS=15000
MARKET_DATA_REPLAY_PATH=data/replay
MARKET_DATA_REPLAY_SPEED=1.0
MARKET_DATA_ALLOW_STALE=60
ACCOUNT_SIZE=25000
BASE_RISK_PCT=0.0025
MAX_RISK_PCT=0.0025
MAX_TRADES_PER_DAY=15
MAX_DAILY_LOSS_PCT=0.02
DAILY_MAX_DD_PCT=3.0
DAILY_PROFIT_TARGET_PCT=0.015
MAX_CONSECUTIVE_LOSSES=3
GLOBAL_DD_LIMIT_PCT=0.08
MIN_SIGNAL_SCORE=75

# Risk environment thresholds
FUNDING_EXTREME_ABS=0.03
FUNDING_ELEVATED_ABS=0.02
FUNDING_INTERVAL_MINUTES=480
FUNDING_BLOCK_BEFORE_MINUTES=10
FUNDING_CLOSE_BEFORE_MINUTES=2
LEVERAGE_EXTREME=3.0
LEVERAGE_ELEVATED=2.5
OI_SPIKE_PCT=0.18
TREND_STRENGTH_MIN=0.6

# Safety controls
COOLDOWN_MINUTES_AFTER_LOSS=30
MAX_LOSSES_PER_DAY=3

# Scalper strategy
CANDLE_INTERVAL=3m
CANDLE_HISTORY_LIMIT=120
EMA_LENGTH=50
MOMENTUM_MODE=adx
ADX_PERIOD=14
ADX_THRESHOLD=20
ATR_PERIOD=14
ATR_SMA_PERIOD=20
EMA_PULLBACK_PCT=0.0015
ENGULFING_WICK_RATIO=0.5
VOLUME_CONFIRM_ENABLED=true
VOLUME_SMA_PERIOD=20
VOLUME_CONFIRM_MULTIPLIER=1.0
MAX_STOP_PCT=0.0025
TAKE_PROFIT_PCT=0.003
FEE_BPS=5.5
SLIPPAGE_BPS=1.5
SCALP_TP_PCT=0.010
SCALP_SL_PCT=0.005
SCALP_MAX_HOLD_MINUTES=60
SCALP_REENTRY_COOLDOWN_MINUTES=20
SCALP_MIN_SCORE=78
SCALP_TREND_FILTER_ENABLED=true
SCALP_REGIME_ENABLED=true
SCALP_EMA_FAST=20
SCALP_EMA_SLOW=50
SCALP_EMA_TREND=200
SCALP_ATR_PERIOD=14
SCALP_ATR_PCT_MIN=0.0015
SCALP_ATR_PCT_MAX=0.0120
SCALP_TREND_SLOPE_MIN=0.0002
SCALP_SETUP_MODE=pullback_engulfing
SCALP_PULLBACK_EMA=20
SCALP_PULLBACK_MAX_DIST_PCT=0.0020
# Minimum distance from pullback EMA for continuation entries (0 disables)
SCALP_PULLBACK_MIN_DIST_PCT=0.0
SCALP_ENGULFING_MIN_BODY_PCT=0.0006
SCALP_RSI_PERIOD=14
SCALP_RSI_CONFIRM=true
SCALP_RSI_LONG_MIN=45
SCALP_RSI_SHORT_MAX=55
# Exhaustion caps (safe defaults disable blocking)
SCALP_RSI_LONG_MAX=100
SCALP_RSI_SHORT_MIN=0
SCALP_BREAKOUT_LOOKBACK=20
SCALP_RETEST_MAX_BARS=6
NEWS_BLACKOUTS=

# Telegram
TELEGRAM_DEBUG_SKIPS=false
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Dashboard
# Local dev default can be empty (dashboard uses localhost:8000 automatically).
# For two-app Fly deployments keep NEXT_PUBLIC_API_BASE empty and use /api rewrite.
NEXT_PUBLIC_API_BASE=
INTERNAL_API_BASE_URL=http://api:8000
API_ORIGIN=http://api:8000

# Sweet8 Hybrid
SWEET8_ENABLED=true
SWEET8_MODE=auto
SWEET8_BASE_RISK_PCT=0.0025
SWEET8_MAX_RISK_PCT=0.005
SWEET8_MAX_OPEN_POSITIONS_TOTAL=2
SWEET8_MAX_OPEN_POSITIONS_PER_SYMBOL=1
SWEET8_DISABLE_PREMATURE_EXITS=true
MIN_SIGNAL_SCORE_TREND=78
MIN_SIGNAL_SCORE_RANGE=70
RISK_REDUCTION_TRIGGER_R=0.6
RISK_REDUCTION_TARGET_R=0.7
RISK_REDUCTION_ENABLED=true
EXIT_SCORE_MIN=55
PULLBACK_ATR_MULT=0.5
SL_ATR_MULT=1.4
TP_ATR_MULT=2.2
DEV_ATR_MULT=1.0
RANGE_SL_ATR_MULT=0.8
RANGE_TP_ATR_MULT=1.0
SYMBOL_COOLDOWN_MIN=5

# Require closed candles for entry evaluation
REQUIRE_CANDLE_CLOSE_CONFIRM=true
# Disable breakout retest chase entries when true
DISABLE_BREAKOUT_CHASE=false
# Additional cap across all symbols per direction (0 = unlimited)
MAX_OPEN_POSITIONS_PER_DIRECTION=0
